var TEXT=1;var TEXT_AREA=3;var DATE=10;var PLAIN_TEXT=14;var PICK_LIST=100;var RADIO=101;var LIST=102;var CHECK_BOXES=103;var formSaved=false;function movrli(b,a){if(dragging==true){return}if(a){b.className="field-icons-hover"}else{b.className="field-icons-active"}}var mouseLeft;var mouseTop;var helem;var mfobj;function movefield(d,f){disableDefaultAction(d);if(document.all){mouseLeft=window.event.clientX+document.body.scrollLeft-parseInt(findPosX(f));mouseTop=window.event.clientY+document.body.scrollTop-parseInt(findPosY(f))}else{mouseLeft=d.pageX-parseInt(findPosX(f));mouseTop=d.pageY-parseInt(findPosY(f))}mfobj=f;helem=document.getElementById("hiddendiv");helem.style.left=mouseLeft;helem.style.top=mouseTop;helem.innerHTML="<ul class='field-icons'>"+f.outerHTML+"</ul>";helem.style.width="140px";var c=docid("formcontainer").getElementsByTagName("div");var a=null;if(c.length<2){var e=docid("formcontainer1").getElementsByTagName("div");if(e.length<2){a=c.item(0)}else{c=e}}if(a==null){a=c.item(1)}var b=docid("dotlayer");b.style.width=a.offsetWidth+"px";b.style.height="32px";removemovr();closeDialog();movrfcid=null;document.onmousemove=movemouse;document.onmouseup=dragstop}function disableDefaultAction(a){if(document.all){document.onselectstart=new Function("return false")}else{a.preventDefault()}}function movemouse(b){if(mfobj.className!="field-icons-hover"){mfobj.className="field-icons-hover"}dragging=true;disableDefaultAction(b);if(document.all){mouseLeft=window.event.clientX+document.body.scrollLeft;mouseTop=window.event.clientY+document.body.scrollTop}else{mouseLeft=b.pageX;mouseTop=b.pageY}helem.style.left=(mouseLeft-helem.offsetWidth/2)+"px";helem.style.top=(mouseTop-helem.offsetHeight/2)+"px";helem.style.visibility="visible";var a=domousemove(mouseLeft,mouseTop,true);if(a!=true){domousemove(mouseLeft,mouseTop,false)}}function domousemove(h,f,d){var e=docid("formcontainer1").getElementsByTagName("div");if(d==true){e=docid("formcontainer").getElementsByTagName("div")}var l=docid("dotlayer");var k=false;for(var a=0;a<e.length;a++){var c=e.item(a);var j=parseInt(findPosX(c));var g=parseInt(findPosY(c));if(c.className.indexOf(fcls)==-1){continue}if((d==true&&h+helem.offsetWidth/2<j)||(d==false&&h<j)||(a==0&&(f+helem.offsetHeight/2<g))){if((d==false&&h<j)&&findPosY(docid("formcontainer"))+docid("formcontainer").offsetHeight>(f+helem.offsetHeight/2)){docid("formcontainer").appendChild(l);l.style.visibility="visible"}else{document.body.appendChild(l);l.style.visibility="hidden"}k=true;break}else{if(h>j+l.offsetWidth){if(d==true&&findPosY(docid("formcontainer1"))+docid("formcontainer1").offsetHeight>(f+helem.offsetHeight/2)){docid("formcontainer1").appendChild(l);l.style.visibility="visible"}else{document.body.appendChild(l);l.style.visibility="hidden"}k=false;break}}if(f-helem.offsetHeight-c.offsetHeight<g){var b=c.nextSibling;if(b){c.parentNode.insertBefore(l,b)}else{c.parentNode.appendChild(l)}l.style.visibility="visible";k=true;break}}return k}function dragstop(b){mfobj.className="field-icons-active";document.onmousemove=null;document.onmouseup=null;if(document.all){document.onselectstart=null}var a=helem.getElementsByTagName("li").item(0).getAttribute("typeid");helem.style.visibility="hidden";helem.style.left="0px";helem.style.top="0px";if(docid("dotlayer").style.visibility=="visible"){a=parseInt(a);if(a==PLAIN_TEXT){shDescPop();dootherworks(a,true)}else{showf(a);dootherworks(a,true)}}else{removedrag()}dragging=false}function removedrag(){if(helem){helem.style.visibility="hidden";document.body.appendChild(docid("dotlayer"));docid("dotlayer").style.visibility="hidden"}optfcid=null}function shDescPop(a){if(optfcid&&optfcid!=null){emptyoptfcid()}var c=docid("plaintxtdiv");c.style.display="block";TE.edit(docid("contdiv"));if(a){editfcid=a;var b=docid("input"+a);TE.setContent(b.innerHTML);docid("descform").fcid.value=a;docid("descform").update.value=true}}function showf(c,b,a){if(propHtml==""){propHtml=docid("props").innerHTML;docid("props").innerHTML=""}if(a){docid("props").innerHTML=propHtml}else{showDialog(propHtml,"position=absolute, left=150, top=80, closeButton=no, modal=yes",null,removedrag)}if(b&&b!=null){showFields(c,b)}else{docid("fields").value=c;showFields(c)}}function showFields(f,g,c,e){var d=docid("propstbody").rows;for(var b=0;b<d.length;b++){d.item(b).style.display="none"}docid("lname").style.display=rowdisp;docid("appearance").style.display=rowdisp;docid("required").style.display=rowdisp;docid("dfname").style.display=rowdisp;docid("delfname").style.color="#999999";add=true;docid("labelName").focus();if(f==TEXT||f==TEXT_AREA){docid("dfieldsize").style.display=rowdisp}if(f!=PLAIN_TEXT){docid("actionscript").style.display=rowdisp}if(f==TEXT){docid("inputdatatype").style.display=rowdisp}if(f==DATE){docid("inputdateformat").style.display=rowdisp}if(f==PICK_LIST||f==RADIO||f==LIST||f==CHECK_BOXES){docid("tr_datasource_none").style.display="none";docid("srctype2").click()}else{docid("tr_datasource_none").style.display="";docid("srctype1").click()}if(g){add=false;editfcid=g;var a=docid("input"+g);docid("labelName").value=docid("dispName"+g).innerHTML;docid("scriptName").value=getA(a,"scriptName");docid("fieldsize").value=getA(a,"size");docid("fields").value=getA(a,"fieldtype");docid("inputdt").value=getA(a,"inputdt");docid("updatescript").value=URLDecode(getA(a,"updatescript"));if(getA(a,"updatescriptenable")=="1"){docid("updatescriptenable").click()}docid("reqd").checked=getBool(getA(a,"isReq"));if(docid("disabledf")){docid("disabledf").checked=getBool(getA(a,"disabledf"))}docid("datasource").value=URLDecode(getA(a,"datasource"));if(docid("srctype"+getA(a,"srctype"))){docid("srctype"+getA(a,"srctype")).click()}docid("delfname").value=getA(a,"scriptName");docid("delfname").style.color="#000000";docid("dialogtitle").innerHTML="Editing '"+docid("dispName"+g).innerHTML+"'..."}else{docid("dialogtitle").innerHTML="Adding '"+getTypeString(f)+"'..."}if(f==TEXT){if(g&&!c){docid("initValue").value=getA(a,"initval");docid("fieldsize").value=getA(a,"size")}}else{if(f==TEXT_AREA){if(g&&!c){docid("initValue").value=getA(a,"initval");docid("fieldsize").value=getA(a,"size")}}else{if(g){docid("initValue").value=getA(a,"initval");docid("fieldsize").value=getA(a,"size")}}}}function editf(){var c=movrfcid;var b=getA(docid("input"+c),"fieldtype");var a=b;selfid=movrfcid;editpickcnt=0;if(a==PLAIN_TEXT){shDescPop(c);return}showf(a,c);docid("properties").update.value=true;docid("properties").fcid.value=c;docid("properties").fctype.value=a}function deletef(){var d=movrfcid;var c=getA(docid("input"+d),"fieldtype");var b=movrlname;askstate=true;var a=confirm("Data corresponding to this field will be lost. Do you really want to delete?\nPress OK to delete or press Cancel to return back.");askstate=false;if(a==false){return}askstate=true;getHtml(ROOT_URL+"?c=form&m=delfield&elementID="+d+"&fieldtype="+c,"deletefcb",d);fadeOut(d,150)}function deletefcb(a,b){a=trimString(a);closeDialog();optfcid=null;var c=docid(b);fadeOutCall=false;docid("actionsdiv").style.display="none";if(a!=null&&a!=""&&a.length!=0&&a.indexOf("success")==-1){c.style.display="";alert(a);c.className=fmcls;docid("actionsdiv").style.display="block";askstate=false;return}askstate=false;c.parentNode.removeChild(c);updSeq(a);loadoff();setFormChanged();return}function movropt(){if(movrfcid&&movrfcid!=null){docid("actionsdiv").className="field-action-hover";movrworks();showOptions()}}function moutopt(){docid("actionsdiv").className="field-action"}function movrworks(){docid("actionsdiv").style.top=findPosY(docid(movrfcid))+"px";docid("actionsdiv").style.left=findPosX(docid(movrfcid))+"px";docid("actionsdiv").style.height=docid(movrfcid).offsetHeight+"px";docid("actionsdiv").style.display="block";if(optfcid&&optfcid!=null){if(movrfcid==optfcid){docid(optfcid).className=facls}else{emptyoptfcid();docid(movrfcid).className=facls}}else{docid(movrfcid).className=fmcls}}function removemovr(){if(movrfcid&&movrfcid!=null){var a=docid(movrfcid);if(a){a.className=fcls}docid("actionsdiv").style.display="none"}}function emptyoptfcid(){if(optfcid&&optfcid!=null){docid(optfcid).className=fcls}closeDialog();optfcid=null;docid("actionsdiv").style.display="none"}function showOptions(){var a=movrfcid;if(fcidopthtml==null){fcidopthtml=docid("fcidoptions").innerHTML;docid("fcidoptions").innerHTML=""}optfcid=a;showDialog(fcidopthtml,"needIframe=no, position=relative, top=-4, left=-1, srcElement=actionsdiv, closeButton=no, closeOnBodyClick=yes",null,emptyoptfcid);var c=getA(docid("input"+a),"comptype");optfcid=a;docid(optfcid).className=facls;var b=docid("_DIALOG_CONTENT").getElementsByTagName("table").item(0);b.rows.item(0).style.display=rowdisp;b.rows.item(1).style.display=rowdisp}function submitField(){var c=docid("fields").value;var b=docid("properties");var a=new Array();a.compType=c;getHtmlForForm(b,"addField",a);docid("props").innerHTML="";setFormChanged()}var selfid=null;function addField(g,j){loadon();closeDialog();askstate=true;try{clDescPop()}catch(k){}removedrag();var f="";var h;var n=-1;var l;if(editfcid==null){var a=1;if(j){if(j.selAppId){var i=document.createElement("div");i.innerHTML=g;if(document.all){f=i.childNodes[0].id}else{f=i.childNodes[4].id}i.innerHTML=""}}var m=document.createElement("div");if(n==-1||n==""){if(a==1){docid("formcontainer").appendChild(m);m.outerHTML=g;l=getLast(true)}else{docid("formcontainer1").appendChild(m);m.outerHTML=g;l=getLast()}}else{h=docid(n);if(a==1&&h.parentNode==docid("formcontainer1")){docid("formcontainer").appendChild(m);m.outerHTML=g;l=getLast(true)}else{if(h){h.parentNode.insertBefore(m,h);m.outerHTML=g;l=getPrev(docid(n))}else{docid("formcontainer1").appendChild(m);m.outerHTML=g;l=getLast()}}}}else{docid(editfcid).outerHTML=g;l=docid(editfcid)}var d=docid("formcontainer").innerHTML;docid("formcontainer").innerHTML=d;docid("addfieldinfo").style.display="none";if(j&&j.selAppId){var c=j.selAppId;var b=docid("input"+f);b.setAttribute("refAppId",c)}if(selfid&&selfid!=null){var o=docid(selfid);if(o){o.className=fcls}}selfid=null;if(l&&l.id){fadeIn(l.id,150,clearMovr);selfid=l.id;docid(selfid).className=facls}else{clearMovr()}setFormChanged()}function clearMovr(){MainContent.regEventByClass("div","field-outer-container");currOrd=getCurrentOrder();askstate=false;loadoff()}function fcm(b,c){if(dragging!=true&&askstate!=true){if(selfid!=null){docid(selfid).className=fcls;selfid=null}var a=b.className.split(" ")[0];var e=b.id;if(c&&a.indexOf(fmcls)!=-1){if(optfcid&&e==optfcid&&optfcid!=""&&optfcid!=null){return}if(optfcid&&optfcid!=null){emptyoptfcid()}removemovr();b.className=fcls}else{if(!c&&a.indexOf(fmcls)==-1){if(movrfcid){var d=docid(movrfcid);if(d&&d.className.indexOf(fmcls)!=-1){d.className=fcls}}movrfcid=e;if(optfcid&&movrfcid!=optfcid){emptyoptfcid()}b.className=fmcls;movrworks();movrlname=getA(docid("input"+e),"dfname")}}}}function addf(a){showf(a);dootherworks(a)}function dootherworks(a,l){var k=docid("formcontainer").parentNode.getElementsByTagName("label");var j=new Array();for(var c=0;c<k.length;c++){fcl=k.item(c);if(fcl.id&&fcl.id.indexOf("dispName")==0){j[j.length]=trimString(fcl.innerHTML)}}var h=getTypeString(parseInt(a))+" ";var g=1;while(checkifpresent(j,(h+g+""))==true){g++}h=h+g+"";docid("properties").labelName.value=h;var b=1;f=docid("formcontainer1").getElementsByTagName("div");if(f.length>1){b=2}var e=-1;if(l){b=2;var d=docid("dotlayer");if(d.parentNode.id=="formcontainer"){b=1}var f=d.parentNode.getElementsByTagName("div");for(var c=0;c<f.length;c++){if(f.item(c)==d&&c!=f.length-1){e=f.item(c+1).id+"";break}}if(e==-1&&b==1){f=docid("formcontainer1").getElementsByTagName("div");if(f.length>1){e=f.item(1).id+""}}}docid("properties").update.value=false;docid("properties").fcid.value="";docid("properties").fctype.value="";docid("labelName").focus();docid("labelName").select();editfcid=null}function getTypeString(a){switch(a){case TEXT:return"Single Line";case TEXT_AREA:return"Multi Line";case PICK_LIST:return"Dropdown";case RADIO:return"Radio";case CHECK_BOXES:return"Check box";case LIST:return"Multi Select";case DATE:return"Date";case PLAIN_TEXT:return"Notes";default:return""}}function setFormChanged(){if(!!docid("formsaved")){docid("formsaved").innerHTML="*"}else{docid("fname").innerHTML+="<span id='formsaved' style='color:red;vertical-align:middle;'>*</span>"}}function previewForm(){getHtml("/tmworks/rview?requestID=getsf&formID="+formprop[0],"showPreviewForm")}function showPreviewForm(b){var c={previewcontent:b};var a=docid("formpreview").innerHTML;showDialog(a.process(c),"position=absolute, left=175, top=80, closeButton=no, modal=yes")}var dragging=false;GridCustomize=function(b){this.layoutAreaId=b;this.layoutArea=getObj(b).rows[0];this.oMoveLayer=document.createElement("DIV");this.oMoveLayer.style.zIndex="100";this.oHiliteLayer=document.createElement("DIV");this.oHiliteLayer.style.border="1px dashed #F00";this.oHiliteLayer.style.zIndex="99";this.oMoveLayer.style.position=this.oHiliteLayer.style.position="absolute";this.oMoveLayer.style.left=this.oHiliteLayer.style.left="-1000px";this.oMoveLayer.style.top=this.oHiliteLayer.style.top="-1000px";document.body.appendChild(this.oMoveLayer);document.body.appendChild(this.oHiliteLayer);this.oColumns=new Array();this.oColumns=this.findChild(this.layoutArea,"TD");for(var d=0;d<this.oColumns.length;d++){this.oColumns[d].width=(100/this.oColumns.length)+"%";if(this.oColumns[d].className.indexOf("gridColumn")==-1){this.oColumns[d].className+=" gridColumn"}var c=this.findChild(this.oColumns[d],"DIV");for(var a=0;a<c.length;a++){if(c[a].className.indexOf("gridItem")==-1){c[a].className+=" gridItem"}}}};GridCustomize.prototype.regEventByAttrib=function(a,c){var d=this.layoutArea.getElementsByTagName(a);for(var b=0;b<d.length;b++){if(d[b].getAttribute(c)!=null||d[b].getAttribute(c)!=""){this.registerEventForEl(d[b])}}};GridCustomize.prototype.regEventByClass=function(a,c){var d=this.layoutArea.getElementsByTagName(a);for(var b=0;b<d.length;b++){if(d[b].className!=null&&(d[b].className.indexOf(c)>-1)){this.registerEventForEl(d[b])}}};GridCustomize.prototype.registerEventForEl=function(a){a.dragLis=this;a.onmousedown=function(b){this["dragLis"].captureLayer(b)}};GridCustomize.prototype.captureLayer=function(c){if(browser_ie){srcElement=window.event.srcElement}else{if(browser_nn4||browser_nn6){srcElement=c.target}}if(typeof srcElement!="undefined"&&srcElement!=null){var b=srcElement;var a=new Array();cnt=0;while(b){if(b==this.layoutArea){this.oCurrLayer=a[cnt-2];break}a[cnt]=b;b=b.parentNode;cnt++}this.oMoveLayer.className="field-outer-container-drag";this.oMoveLayer.style.width=this.oCurrLayer.offsetWidth;this.oMoveLayer.style.height=this.oCurrLayer.offsetHeight;this.oMoveLayer.style.left=findPosX(this.oCurrLayer)+"px";this.oMoveLayer.style.top=findPosY(this.oCurrLayer)+"px";this.oMoveLayer.innerHTML=this.oCurrLayer.innerHTML;this.oMoveLayer.className="field-outer-container-drag";this.showHiliteLayer(this.oCurrLayer);this.oCurrLayer.style.visibility="hidden";if(browser_ie){this.diffLeft=window.event.clientX+document.body.scrollLeft-parseInt(this.oMoveLayer.style.left);this.diffTop=window.event.clientY+document.body.scrollTop-parseInt(this.oMoveLayer.style.top)}else{if(browser_nn4||browser_nn6){this.diffLeft=c.pageX-parseInt(this.oMoveLayer.style.left);this.diffTop=c.pageY-parseInt(this.oMoveLayer.style.top)}}document.dragLis=this;document.onmousemove=function(d){document.dragLis.moveLayer(d)};document.onmouseup=function(d){document.dragLis.releaseLayer(d)}}};GridCustomize.prototype.moveLayer=function(k){dragging=true;clearTextSelection();if(browser_ie){if(window.event.clientY+window.screenTop+50>=window.screen.height-50){document.body.scrollTop+=20}else{if(window.event.clientY<=50){document.body.scrollTop-=20}}var f=(window.event.clientX-this.diffLeft)+document.body.scrollLeft;var l=(window.event.clientY-this.diffTop)+document.body.scrollTop}else{if(browser_nn4||browser_nn6){var f=(k.pageX-this.diffLeft);var l=(k.pageY-this.diffTop)}}this.oMoveLayer.style.left=f+"px";this.oMoveLayer.style.top=l+"px";var c=f+(parseInt(this.oMoveLayer.style.width)/2);var b=l+(parseInt(this.oMoveLayer.style.height)/2);for(var e=0;e<this.oColumns.length;e++){if(c>=findPosX(this.oColumns[e])&&c<=(findPosX(this.oColumns[e])+this.oColumns[e].offsetWidth)){var a=this.oColumns[e];break}}if(a!=null&&typeof a!="undefined"){var h=new Array();h=this.findChild(a,"DIV");for(var d=0;d<h.length;d++){if(l<=findPosY(h[d])){var g=h[d];break}}oNewLayer=this.oCurrLayer;if(g){g.parentNode.insertBefore(this.oCurrLayer,g)}else{a.appendChild(this.oCurrLayer)}this.oCurrLayer=oNewLayer;this.showHiliteLayer(oNewLayer)}};GridCustomize.prototype.releaseLayer=function(){document.onmousemove=null;document.onmouseup=null;this.transXPoints=new Array();this.transYPoints=new Array();this.drawPath(parseInt(this.oMoveLayer.style.left),parseInt(this.oMoveLayer.style.top),findPosX(this.oCurrLayer),findPosY(this.oCurrLayer));this.transPitStops=(this.transXPoints.length>10)?(this.transXPoints.length-1)/10:1;this.transPosCnt=0;var a="document['dragLis'].positionLayer();";this.transIntervalId=window.setInterval(a,15);dragging=false};GridCustomize.prototype.positionLayer=function(){if(this.transXPoints&&this.transPosCnt<this.transXPoints.length-1){this.oMoveLayer.style.left=this.transXPoints[this.transPosCnt]+"px";this.oMoveLayer.style.top=this.transYPoints[this.transPosCnt]+"px";this.transPosCnt=this.transPosCnt+Math.round(this.transPitStops)}else{this.transPosCnt=0;this.transXPoints=this.transYPoints=null;window.clearInterval(this.transIntervalId);this.oMoveLayer.style.left=this.oMoveLayer.style.top="-1000px";this.oHiliteLayer.style.left=this.oHiliteLayer.style.top="-1000px";this.oCurrLayer.style.visibility="";this.oMoveLayer.innerHTML="";setFormChanged()}};GridCustomize.prototype.showHiliteLayer=function(a){this.oHiliteLayer.style.width=a.offsetWidth;this.oHiliteLayer.style.height=a.offsetHeight;this.oHiliteLayer.style.left=findPosX(a)+"px";this.oHiliteLayer.style.top=findPosY(a)+"px"};GridCustomize.prototype.drawPath=function(d,g,c,f){var h=Math.sqrt((c-d)*(c-d)+(f-g)*(f-g));var b=(c-d)/h;var a=(f-g)/h;for(var e=0;e<h;e++){this.transXPoints[e]=d+=b;this.transYPoints[e]=g+=a}};GridCustomize.prototype.findChild=function(e,c){if(e!=null&&typeof e.childNodes!="undefined"){var d=new Array();for(var b=0,a=0;b<e.childNodes.length;b++){if(browser_ie){if(e.childNodes[b].tagName==c){d[a]=e.childNodes[b];a++}}else{if(browser_nn4||browser_nn6){if(e.childNodes.item(b).tagName==c){d[a]=e.childNodes[b];a++}}}}return d}};GridCustomize.prototype.getCurrentOrderAsString=function(){var a="";for(var d=0;d<this.oColumns.length;d++){var c=this.findChild(this.oColumns[d],"DIV");a+="|";for(var b=0;b<c.length;b++){a+=c[b].id;if(b!=c.length-1){a+="_"}}}return a};GridCustomize.prototype.getCurrentOrderAsMatrix=function(e){var a=new Array();for(var d=0;d<this.oColumns.length;d++){a[d]=new Array();var c=this.findChild(this.oColumns[d],"DIV");for(var b=0;b<c.length;b++){a[d][b]=c[b].getAttribute(e)}}return a};function enableDAndDForGrid(b){var a=new GridCustomize(b+"_TABLE","saveDandDResultForGrid");a.regEventByClass("td","boxHeader");a.uniqueId=b}function saveDandDResultForGrid(a){var b=a.getCurrentOrderAsMatrix("childView");updateState(a.uniqueId,"GDLIST",b[0],true)}var propsOpen=false;var propHtml="";var reclinkArr=new Array();var importArr=new Array();var editfcid=null;var fmpropHtml="";var askstate=false;var movrfcid=null;var movrlname=null;var fcls="field-outer-container";var fmcls="field-outer-container-hover";var facls="field-outer-container-action";var formulaArr=new Array();var impCritArr=new Array();function resetFields(){resetForFields("formcontainer");resetForFields("formcontainer1");emptyoptfcid()}function resetForFields(c){var a=docid(c).getElementsByTagName("div");for(var b=0;b<a.length;b++){var d=a.item(b);if(d.className.indexOf(fcls)==-1){continue}d.className=fcls}}var typeChange=false;var add=true;function replaceStr(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a}function focusTextField(b,a){if(add==false){return}var c=b.value;if(trimString(c)==a){b.value=""}b.style.color="#000000"}function blurTextField(c,b){if(add==false){return}var a=c.value;if(trimString(a)==""){c.value=b;c.style.color="#999999"}}var optfcid=null;var fcidopthtml=null;function clearOptFcid(){if(optfcid!=null){docid(optfcid).className=fcls}optfcid=null}var fadeOutCall=false;function getCurrentOrder(){var h=MainContent.getCurrentOrderAsString();h=h.split("|");var f=1;var g="";var e=1;for(var c=1;c<h.length;c++){var b=h[c];b=b.split("_");for(var d=0;d<b.length;d++){var a=b[d];if((a==null)||(a=="_")||(a=="")||isNaN(a)){continue}g=g+a+":"+(e)+":"+(f++)+","}e++}return g}function setSeqcb(a){a=trimString(a);if(a!=null&&a!=""&&a.length!=0&&a.indexOf("success")!=0){alert(a);return}updSeq(a)}function updSeq(a){loadon();currOrd=getCurrentOrder()}putc=function(b,c,a){b.style.color=c;b.style.backgroundColor=a};var editpickcnt=0;function submitDesc(){var a=encodeURIComponent(TE.getContent());var b=new Array();getHtmlForForm(docid("descform"),"addField",b,false,false,"&datasource="+a)}function clDescPop(){docid("descform").fcid.value="";docid("descform").update.value=false;docid("plaintxtdiv").style.display="none";TE.setContent("");removedrag();unFreezeScript()}function showAllForms(){var a=ROOT_URL+"?c=form&m=getall";getHtml(a,"aftshowAllForms")}function showAllTables(){var a=ROOT_URL+"?c=form&m=getalltables";getHtml(a,"aftshowAllTables")}var fmalltables="";function aftshowAllTables(html){if(fmalltables==""){fmalltables=docid("tableallpdiv").innerHTML;docid("tableallpdiv").parentNode.removeChild(docid("tableallpdiv"))}showDialog(fmalltables,"position=absolute, left=175, top=80, closeButton=no, modal=yes",function(){var obj=eval("("+html+")");var ele=docid("alltablelist");ele.options[0]=new Option("-- Please select a base table --","",true,true);for(var i=0;i<obj.length/2;i++){ele.options[i+1]=new Option(obj[i*2],obj[i*2],true,false)}})}function get_table_column_for_gen(){var a=$("alltablelist").value;$j.get("index.php?c=form&m=gettablegenwizard",{tablename:a},function(b){$("td_table_wizard").update(b)})}var fmallforms="";function aftshowAllForms(html){if(fmallforms==""){fmallforms=docid("formallpdiv").innerHTML;docid("formallpdiv").parentNode.removeChild(docid("formallpdiv"))}showDialog(fmallforms,"position=absolute, left=175, top=80, closeButton=no, modal=yes",function(){var obj=eval("("+html+")");var ele=docid("allformlist");for(var i=0;i<obj.length/2;i++){ele.options[i]=new Option(obj[i*2]+" : "+obj[i*2+1],obj[i*2],true,true)}})}function shformprop(){if(fmpropHtml==""){fmpropHtml=docid("formpropdiv").innerHTML;docid("formpropdiv").parentNode.removeChild(docid("formpropdiv"))}showDialog(fmpropHtml,"position=absolute, left=100, top=50, closeButton=no, modal=yes",initFormProp);docid("editfname").focus()}var formprop=["","Untitled Form","This is a untitled form.",""];function initFormProp(){docid("formID").value=formprop[0];docid("editfname").value=formprop[1];docid("fmsucmsg").value=formprop[2];docid("loadAction").value=formprop[3]}function subFormProp(){var e=new Array();e.fname=docid("editfname").value;var a=docid("formID").value;if(docid("copynew").checked){a=""}var c=new Array("formID","formName","formDescription","loadAction","formXML");var d=new Array(a,docid("editfname").value,docid("fmsucmsg").value,docid("loadAction").value,docid("MainContent").innerHTML);var b=ROOT_URL+"?c=form&m=update";getHtml(b,"aftsubFormProp",e,null,getForm(b,c,d))}function aftsubFormProp(html,_123){var data=eval("("+html+")");formprop[0]=data.formID;formprop[1]=data.formName;formprop[2]=data.formDescription;formprop[3]=data.formLoadAction;docid("fname").innerHTML=data.formName;docid("loadAction").value=data.formLoadAction;closeDialog()}function saveForm(){var c=new Array("formID","formName","formDescription","loadAction","formXML");var b=docid("MainContent");var d;if(navigator.appName=="Microsoft Internet Explorer"){d=new Array(formprop[0],formprop[1],formprop[2],formprop[3],innerXHTML(docid("MainContent")))}else{d=new Array(formprop[0],formprop[1],formprop[2],formprop[3],docid("MainContent").innerHTML)}var a=ROOT_URL+"?c=form&m=update&t="+(new Date).getTime();getHtml(a,"aftSaveForm",null,null,getForm(a,c,d))}function aftSaveForm(html,fn){if(docid("formsaved")!=undefined&&docid("formsaved")!=null){docid("formsaved").innerHTML=""}var data=eval("("+html+")");formprop[0]=data.formID;formprop[1]=data.formName;formprop[2]=data.formDescription;formprop[3]=data.formLoadAction;docid("fname").innerHTML=data.formName;if(iframe){window.parent.notify_create_form(data.formID)}}function getPrev(d){var b=docid("formcontainer").getElementsByTagName("div");var e;for(var a=0;a<b.length;a++){var c=b.item(a);if(c.className.indexOf(fcls)==-1){continue}if(c==d){return e}e=c}b=docid("formcontainer1").getElementsByTagName("div");for(var a=0;a<b.length;a++){var c=b.item(a);if(c.className.indexOf(fcls)==-1){continue}if(c==d){return e}e=c}}function getLast(d){var b=docid("formcontainer1").getElementsByTagName("div");if(d==true){b=docid("formcontainer").getElementsByTagName("div")}var e;for(var a=0;a<b.length;a++){var c=b.item(a);if(c.className.indexOf(fcls)==-1){continue}e=c}return e}function shPickCrit(){if(docid("advcrit").style.display=="none"){docid("advcrit").style.display="block"}else{docid("advcrit").style.display="none"}}setOpacity=function(a,b){a.style.opacity=b/10;a.style.filter="alpha(opacity="+b*10+")"};clearTextSelection=function(){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.getSelection){var a=document.getSelection();if(a.collapse){a.collapse(true)}if(a.removeAllRanges){a.removeAllRanges()}}else{if(document.selection){document.selection.empty();window.setTimeout("document.selection.empty()",0)}}}};var caching;function setMovrclass(a){if(a.className=="header-fv-actions-active"){a.className="header-fv-actions-active-hover"}else{if(a.className=="header-fv-actions-inactive"){a.className="header-fv-actions-inactive-hover"}}}function setMoutclass(a){if(a.className=="header-fv-actions-active-hover"){a.className="header-fv-actions-active"}else{if(a.className=="header-fv-actions-inactive-hover"){a.className="header-fv-actions-inactive"}}}function setattr(a,d,c,b){if(c==b){d.getElementsByTagName("a").item(0).style.backgroundColor=a;d.style.backgroundColor=a}}function setmoclass(c,a,b){if(b==true){docid(c).className=a+"2over"}else{docid(c).className=a+"2"}}function submitFrm(a){var b=formprop[0];getHtmlForForm(a,"showSecMsg")};