<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link href="[{#s_base#}]/dbfacephp/css/style-default.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/prototype.js"></script><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/jquery.js"></script><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/tommick.js"></script><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/Utils.js"></script><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/rview.js"></script><script type="text/javascript" src="[{#s_base#}]/dbfacephp/js/codepress.js"></script><script type="text/javascript">
   configFocusInput();   
   function previewapp() {
     $('mainForm').disable();
     document.mainForm.action.value='preview';
     document.mainForm.sql.value=encodeURIComponent(codepress ? codepress.getCode() : document.getElementById('sqlContent').value);
     new Ajax.Request('[{#dbfacephp_base_url#}]/index.php?c=app&m=preview', {
       method: 'post',
       parameters: $('mainForm').serialize(),
       onSuccess: function(transport) {
         $('mainForm').enable();
         $('error').update(transport.responseText).show();
         document.body.scrollTop = 0;
       }
     });
   }
   
   function editapp() {
     document.mainForm.action.value='submit';
     document.mainForm.sql.value=encodeURIComponent(codepress ? codepress.getCode() : document.getElementById('sqlContent').value);
     new Ajax.Request('[{#dbfacephp_base_url#}]/index.php?c=app&m=edit', {
       method: 'post',
       parameters: $('mainForm').serialize(),
       onSuccess: function(transport) {
         $('mainForm').enable();
         $('error').update(transport.responseText).show();
         document.body.scrollTop = 0;
         
         window.parent.frames['menu'].document.location.reload();
         setCookie('NavAccordion', 'false|true|false');
       }
     });     
   }
    document.observe("dom:loaded", function() {
       if ($('formid').value != "-1") {
         getFormVar();
       }
       [{if $apptype == 3}]getRepTypeImg();[{/if}]
    });      
  </script></head><body><div id="bodyColumn"><div id="navcolumn"><a href="[{#dbfacephp_base_url#}]/index.php?c=home&m=dashboard">Dashboard</a> ><a href="[{#dbfacephp_base_url#}]/index.php?c=app&m=applist">Application Management</a> > Edit application</div><div id="error" style="display:none"></div><form action="[{#dbfacephp_base_url#}]/index.php?c=app&m=edit" method="post" id="mainForm" name="mainForm"><input type="hidden" name="action" value="submit"/><input type="hidden" name="appid" value="[{$appinfo.appid}]"/><input type="hidden" name="sql" value=""/><table border="0" cellpadding="0" cellspacing="0" class="otherDisplay2"><tr><td class="config-label">Name:</td><td><input id="appname" name="appname" type="text" class="it1" value="[{$appinfo.appname}]" size="30" onblur="javascript:if($('apptitle').value=='') {$('apptitle').value=$('appname').value;}"></td></tr><tr><td class="config-label">Title:</td><td><textarea id="apptitle" name="apptitle" rows="4" cols="53" class="it1">[{$appinfo.apptitle}]</textarea></td></tr><tr><td class="config-label">Description:</td><td><textarea id="appdesc" name="appdesc" rows="4" cols="53" class="it1">[{$appinfo.appdesc}]</textarea></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr> [{if $appinfo.apptype == 0}] <tr id="div_form"><td class="config-label">Parameters Form:</td><td><select id="formid" name="formid" onchange="javascript:getFormVar();" class="config-picklist"><option value="-1">not Required</option> [{section name=i loop=$forms}] <option value="[{$forms[i].formID}]" [{if $forms[i].formID==$formid}]selected[{/if}]>[{$forms[i].formName}]</option> [{/section}] </select><img src="[{#s_base#}]/dbfacephp/img/refresh.gif" href="javascript:;" id="fbclosetrigger" onclick="javascript:getFormList('formid');" class="imgbtn"/><br/><span class="info-text">Please choose a search form or go to <a href="javascript:;" onclick="javascript:openFB();">Form Builder</a> to create/edit a form.</span></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr><tr id="div_sql_content"><td class="config-label">SQL Content*:<div id="autoComp" class="autoComp"><table id="autoCompTable" class="autoComp"><tbody></tbody></table></div></td><td><a href="javascript:viewOpener();" class="subopen">Larger</a><br/><textarea id="sqlContent" name="sqlContent" rows="15" cols="70" class="codepress sql linenumbers-on">[{$appinfo.sqlcontent}]</textarea><br/><span class="info-text">Please choose a sql query with form script. or go to <a href="javascript:;" onclick="javascript:openQB('copyToEditor', getFormVarList());">Query Builder</a> to create/edit a query sql.</span><div id="formvar" class="info-text"><font color="blue">No variables you can used in your query sql without a search form.</font></div></td></tr> [{elseif $appinfo.apptype == 1}] <tr id="div_form"><td class="config-label">Choose a Form:</td><td><select id="formid" name="formid" onchange="javascript:getFormVar();" class="config-picklist"><option value="-1">not Required</option> [{section name=i loop=$forms}] <option value="[{$forms[i].formID}]" [{if $forms[i].formID==$formid}]selected[{/if}]>[{$forms[i].formName}]</option> [{/section}] </select><img src="[{#s_base#}]/dbfacephp/img/refresh.gif" href="javascript:;" id="fbclosetrigger" onclick="javascript:getFormList('formID');" class="imgbtn"/><br/><span class="info-text">Please choose a search form or go to <a href="javascript:;" onclick="javascript:openFB();">Form Builder</a> to create/edit a form.</span></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr><tr id="div_sql_content"><td class="config-label">Application Scripts*:<div id="autoComp" class="autoComp"><table id="autoCompTable" class="autoComp"><tbody></tbody></table></div></td><td><a href="javascript:viewOpener();" class="subopen">Larger</a><br/><textarea id="sqlContent" name="sqlContent" rows="15" cols="70" class="codepress sql linenumbers-on">[{$appinfo.sqlcontent}]</textarea><br/><span class="info-text">Please choose a sql query with form script. or open <a href="javascript:;" onclick="javascript:openIUDB('copyToIUDEditor', getFormVarList());">DML Builder</a> to help you create one.</span><div id="formvar" class="info-text"><font color="blue">No variables you can used in your query sql without a search form.</font></div></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr><tr id="div_tiprow"><td class="bodyTextBold">Confirmation Message:</td><td><textarea id="opTip" name="opTip" id="opTip" rows="2" cols="52" class="config-textarea">[{$appinfo.param1}]</textarea><br/><div class="info-text">This message will display before sql execution.'Search for Update' will ignore this field.</div></td></tr> [{elseif $appinfo.apptype == 2}] <tr id="div_form"><td class="config-label">Choose a Form:</td><td><select id="formid" name="formid" onchange="javascript:getFormVar();" class="config-picklist"><option value="-1">not Required</option> [{section name=i loop=$forms}] <option value="[{$forms[i].formID}]" [{if $forms[i].formID==$formid}]selected[{/if}]>[{$forms[i].formName}]</option> [{/section}] </select><img src="[{#s_base#}]/dbfacephp/img/refresh.gif" href="javascript:;" id="fbclosetrigger" onclick="javascript:getFormList('formID');" class="imgbtn"/><br/><span class="info-text">Please choose a search form or go to <a href="javascript:;" onclick="javascript:openFB();">Form Builder</a> to create/edit a form.</span></td></tr><tr id="div_form_hr" style="display:none"><td colspan="2" class="bodyText"><hr/></td></tr><tr><td class="config-label">Table Name:</td><td><select id="tablename" name="tablename" class="config-picklist"> [{section name=i loop=$tables}] <option value="[{$tables[i]}]" [{if $tables[i]==$appinfo.param1}]selected[{/if}]>[{$tables[i]}]</option> [{/section}] </select></td></tr><tr id="div_sql_content"><td class="config-label">Application Scripts*:<div id="autoComp" class="autoComp"><table id="autoCompTable" class="autoComp"><tbody></tbody></table></div></td><td><a href="javascript:viewOpener();" class="subopen">Larger</a><br/><textarea id="sqlContent" name="sqlContent" rows="15" cols="70" class="codepress sql linenumbers-on">[{$appinfo.sqlcontent}]</textarea><br/><span class="info-text">Please choose a sql query with form script. or go to <a href="javascript:;" onclick="javascript:openQB('copyToEditor', getFormVarList());">Query Builder</a> to create/edit a query sql.</span><div id="formvar" class="info-text"><font color="blue">No variables you can used in your query sql without a search form.</font></div></td></tr> [{elseif $appinfo.apptype == 3}] <tr><td class="bodyTextBold">Chart Type:</td><td><select id="repType" name="repType" onchange="javascript:getRepTypeImg();" class="config-picklist"> [{section name=i loop=$charttypes}] <optgroup label="[{$charttypes[i].label}]"> [{section name=j loop=$charttypes[i].charts}] <option value="[{$charttypes[i].charts[j].chartclass}]" [{if $curcharttype=="[{$charttypes[i].charts[j].chartclass}]"}]selected[{/if}]>[{$charttypes[i].charts[j].label}]</option> [{/section}] </optgroup> [{/section}] </select><br/><img id="img_rep" src="[{#s_base#}]/dbfacephp/img/charts/column3d.jpg"/><div id="charthelp" class="info-text"></div></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr><tr><td class="config-label">Choose a Form:</td><td><select id="formid" name="formid" onchange="javascript:getFormVar();" class="config-picklist"><option value="-1">not Required</option> [{section name=i loop=$forms}] <option value="[{$forms[i].formID}]" [{if $forms[i].formID==$formid}]selected[{/if}]>[{$forms[i].formName}]</option> [{/section}] </select><img src="[{#s_base#}]/dbfacephp/img/refresh.gif" href="javascript:;" id="fbclosetrigger" onclick="javascript:getFormList('formID');" class="imgbtn"/><br/><span class="info-text">Please choose a search form or go to <a href="javascript:;" onclick="javascript:openFB();">Form Builder</a> to create/edit a form.</span></td></tr><tr id="div_form_hr"><td colspan="2" class="bodyText"><hr/></td></tr><tr id="div_sql_content"><td class="config-label">Datasource*:<div id="autoComp" class="autoComp"><table id="autoCompTable" class="autoComp"><tbody></tbody></table></div></td><td><a href="javascript:viewOpener();" class="subopen">Larger</a><br/><textarea id="sqlContent" name="sqlContent" rows="15" cols="70" class="codepress sql linenumbers-on">[{$appinfo.sqlcontent}]</textarea><br/><span class="info-text">Please choose a sql query with form script. or go to <a href="javascript:;" onclick="javascript:openQB('copyToEditor', getFormVarList());">Query Builder</a> to create/edit a query sql.</span><div id="formvar" class="info-text"><font color="blue">No variables you can used in your query sql without a search form.</font></div></td></tr> [{elseif $appinfo.apptype == 4}] <tr id="div_form"><td class="config-label">Parameters Form:</td><td><select id="formid" name="formid" onchange="javascript:getFormVar();" class="config-picklist"><option value="-1">not Required</option> [{section name=i loop=$forms}] <option value="[{$forms[i].formID}]" [{if $forms[i].formID==$formid}]selected[{/if}]>[{$forms[i].formName}]</option> [{/section}] </select><img src="[{#s_base#}]/dbfacephp/img/refresh.gif" href="javascript:;" id="fbclosetrigger" onclick="javascript:getFormList('formid');" class="imgbtn"/><br/><span class="info-text">Please choose a search form or go to <a href="javascript:;" onclick="javascript:openFB();">Form Builder</a> to create/edit a form.</span></td></tr><tr><td colspan="2" class="bodyText"><hr/></td></tr><tr id="div_sql_content"><td class="config-label">SQL Content*:<div id="autoComp" class="autoComp"><table id="autoCompTable" class="autoComp"><tbody></tbody></table></div></td><td><a href="javascript:viewOpener();" class="subopen">Larger</a><br/><textarea id="sqlContent" name="sqlContent" rows="15" cols="70" class="codepress sql linenumbers-on">[{$appinfo.sqlcontent}]</textarea><br/><span class="info-text">Please choose a sql query with form script. or go to <a href="javascript:;" onclick="javascript:openQB('copyToEditor', getFormVarList());">Query Builder</a> to create/edit a query sql.</span><div id="formvar" class="info-text"><font color="blue">No variables you can used in your query sql without a search form.</font></div></td></tr><tr id="div_tiprow"><td colspan="2"><fieldset><legend><b>Max checkpoint num</b></legend><input name="monNum" type="text" class="config-textfield" id="monNum" value="5" size="30" onKeypress="return onlyNumber(event)"><br/><div class="info-text">The field defines how many checkpoints you want to save.</div></fieldset></td></tr> [{/if}] <tr><td colspan="2">&nbsp;</td></tr><tr><td align="center">&nbsp;</td><td align="center"><input type="button" class="input-submit gray" onclick="javascript:document.location='[{#dbfacephp_base_url#}]/index.php?c=app&m=applist'" value="<< [{ci_lang key='strBack'}]"/><input type="button" class="input-submit" onclick="javascript:editapp();" value="Confirm to Update"/></td></tr><tr height="10px"><td colspan="2">&nbsp;</td></tr></table></form></div>
[{include file="analytics.tpl"}]
</body></html>